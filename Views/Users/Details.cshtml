@model SummerSplashWeb.Models.User
@{
    ViewData["Title"] = "User Details";
}

@if (TempData["Success"] != null)
{
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="bi bi-check-circle-fill me-2"></i>
        @TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle-fill me-2"></i>
        @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
}

<div class="mb-3">
    <a href="@Url.Action("Index")" class="btn btn-outline-secondary">
        <i class="bi bi-arrow-left me-2"></i>Back to Users
    </a>
</div>

<div class="row g-4">
    <!-- User Information Card -->
    <div class="col-lg-4">
        <div class="card" style="border: none; border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
            <div class="card-body text-center p-4">
                <div class="user-avatar-large mb-3">
                    @Model.FirstName.Substring(0, 1).ToUpper()@Model.LastName.Substring(0, 1).ToUpper()
                </div>
                <h4 class="mb-1" style="color: #344767; font-weight: 700;">
                    @Model.FirstName @Model.LastName
                </h4>
                <p class="text-muted mb-3">@(Model.Position ?? "No Position Set")</p>

                <div class="mb-3">
                    @if (Model.IsActive)
                    {
                        <span class="badge bg-success px-3 py-2">
                            <i class="bi bi-check-circle me-1"></i>Active
                        </span>
                    }
                    else
                    {
                        <span class="badge bg-secondary px-3 py-2">
                            <i class="bi bi-x-circle me-1"></i>Inactive
                        </span>
                    }

                    @if (Model.IsApproved)
                    {
                        <span class="badge bg-success px-3 py-2">
                            <i class="bi bi-shield-check me-1"></i>Approved
                        </span>
                    }
                    else
                    {
                        <span class="badge bg-warning px-3 py-2">
                            <i class="bi bi-clock me-1"></i>Pending
                        </span>
                    }
                </div>

                <hr>

                <div class="text-start">
                    <div class="mb-3">
                        <small class="text-muted d-block mb-1">
                            <i class="bi bi-envelope me-2"></i>Email
                        </small>
                        <div style="font-weight: 600; color: #344767; word-break: break-all;">
                            @Model.Email
                        </div>
                    </div>

                    <div class="mb-3">
                        <small class="text-muted d-block mb-1">
                            <i class="bi bi-phone me-2"></i>Phone
                        </small>
                        <div style="font-weight: 600; color: #344767;">
                            @(Model.PhoneNumber ?? "Not provided")
                        </div>
                    </div>

                    <div class="mb-3">
                        <small class="text-muted d-block mb-1">
                            <i class="bi bi-geo-alt me-2"></i>Address
                        </small>
                        <div style="font-weight: 600; color: #344767;">
                            @(Model.Address ?? "Not provided")
                        </div>
                    </div>

                    <div class="mb-3">
                        <small class="text-muted d-block mb-1">
                            <i class="bi bi-calendar me-2"></i>Member Since
                        </small>
                        <div style="font-weight: 600; color: #344767;">
                            @Model.CreatedAt.ToString("MMMM dd, yyyy")
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Actions Card -->
    <div class="col-lg-8">
        <div class="card mb-4" style="border: none; border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
            <div class="card-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 15px 15px 0 0;">
                <h5 class="mb-0">
                    <i class="bi bi-gear me-2"></i>Actions
                </h5>
            </div>
            <div class="card-body p-4">
                <div class="row g-3">
                    <div class="col-md-6">
                        <a href="@Url.Action("Edit", new { id = Model.UserId })"
                           class="btn btn-primary w-100 btn-lg">
                            <i class="bi bi-pencil me-2"></i>Edit User
                        </a>
                    </div>

                    @if (!Model.IsApproved)
                    {
                        <div class="col-md-6">
                            <form method="post" asp-action="Approve" asp-route-id="@Model.UserId" class="d-inline">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-success w-100 btn-lg">
                                    <i class="bi bi-check-circle me-2"></i>Approve User
                                </button>
                            </form>
                        </div>
                    }

                    @if (Model.IsActive)
                    {
                        <div class="col-md-6">
                            <form method="post" asp-action="Deactivate" asp-route-id="@Model.UserId" class="d-inline">
                                @Html.AntiForgeryToken()
                                <button type="submit"
                                        class="btn btn-warning w-100 btn-lg"
                                        onclick="return confirm('Are you sure you want to deactivate this user?')">
                                    <i class="bi bi-pause-circle me-2"></i>Deactivate
                                </button>
                            </form>
                        </div>
                    }
                    else
                    {
                        <div class="col-md-6">
                            <form method="post" asp-action="Activate" asp-route-id="@Model.UserId" class="d-inline">
                                @Html.AntiForgeryToken()
                                <button type="submit" class="btn btn-success w-100 btn-lg">
                                    <i class="bi bi-play-circle me-2"></i>Activate
                                </button>
                            </form>
                        </div>
                    }

                    <div class="col-md-12">
                        <form method="post" asp-action="Delete" asp-route-id="@Model.UserId" class="d-inline">
                            @Html.AntiForgeryToken()
                            <button type="submit"
                                    class="btn btn-danger w-100 btn-lg"
                                    onclick="return confirm('Are you sure you want to permanently delete this user? This action cannot be undone.')">
                                <i class="bi bi-trash me-2"></i>Delete User
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Additional Information -->
        <div class="card" style="border: none; border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);">
            <div class="card-header" style="background: #f8f9fa; border-bottom: 2px solid #e9ecef; border-radius: 15px 15px 0 0;">
                <h5 class="mb-0" style="color: #344767; font-weight: 700;">
                    <i class="bi bi-info-circle me-2"></i>Additional Information
                </h5>
            </div>
            <div class="card-body p-4">
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <small class="text-muted d-block mb-1">Emergency Contact</small>
                        <div style="font-weight: 600; color: #344767;">
                            @(Model.EmergencyContact ?? "Not provided")
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <small class="text-muted d-block mb-1">Emergency Phone</small>
                        <div style="font-weight: 600; color: #344767;">
                            @(Model.EmergencyPhone ?? "Not provided")
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <small class="text-muted d-block mb-1">Hire Date</small>
                        <div style="font-weight: 600; color: #344767;">
                            @(Model.HireDate?.ToString("MMMM dd, yyyy") ?? "Not set")
                        </div>
                    </div>

                    <div class="col-md-6 mb-3">
                        <small class="text-muted d-block mb-1">User ID</small>
                        <div style="font-weight: 600; color: #344767;">
                            #@Model.UserId
                        </div>
                    </div>
                </div>

                @if (!string.IsNullOrEmpty(Model.Notes))
                {
                    <hr>
                    <div>
                        <small class="text-muted d-block mb-2">Notes</small>
                        <div style="color: #344767; line-height: 1.6;">
                            @Model.Notes
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<style>
    .user-avatar-large {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 700;
        font-size: 48px;
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        border-radius: 10px;
        padding: 12px 20px;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }

    .btn-success {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        border: none;
        border-radius: 10px;
        padding: 12px 20px;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-success:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
    }

    .btn-warning {
        background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
        border: none;
        border-radius: 10px;
        padding: 12px 20px;
        font-weight: 600;
        color: white;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-warning:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(255, 193, 7, 0.4);
        color: white;
    }

    .btn-danger {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        border: none;
        border-radius: 10px;
        padding: 12px 20px;
        font-weight: 600;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .btn-danger:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
    }

    .btn-outline-secondary {
        border: 2px solid #6c757d;
        border-radius: 10px;
        padding: 10px 20px;
        font-weight: 600;
        transition: all 0.2s;
    }

    .btn-outline-secondary:hover {
        transform: translateY(-2px);
    }
</style>
